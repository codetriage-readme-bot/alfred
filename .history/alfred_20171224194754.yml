the.dir:
    command:
        echo $PWD

docker.pull:
    commands: |
       docker pull {{ index .Args 0 }}
       ls -alh /tmp/schmoedown2
    wait: "{{ index .Args 1 }}"
    fail: letsgo

letsgo:
    multitask: |
        punisher(hello)
        punisher(world)

punisher:
    summary: do something awesome with punisher
    command: |
        punisher --workers 1 --nice 1s --verbose --duration 10s echo {{ index .Args 0 }}

download:
    summary: Download some shit
    multitask: |
        docker.pull(kcmerrill/fetch-proxy, 10s)

say.hello:
    summary: I will say hello!
    usage: alfred say.hello
    command: echo "Hello!"

say.howareyou:
    summary: I will ask how you are
    usage: alfred say.howareyou
    command: |
        echo "How"
        echo "Are"
        echo "You?"

speak:
    tasks: say.hello say.howareyou

blurt:
    multitask: say.hello say.howareyou

fail.me:
    summary: Fail Me should fail
    command: |
        echo "hello world"
        ls -alh /tmp/whatever
    exit: 42

serve:
    summary: serve some shit up
    command: | 
        echo hello world
    serve: 8090
    wait: 10h


test.defaults:
    summary: testing defaults
    command: |
        echo {{ index .Args 0 }} {{ index .Args 1 }}
    defaults:
        - ""
        - "world"

echo :
    summary: I will echo something
    command: |
        sleep 1 && echo {{ index .Args 0 }}

for.each:
    summary: Lets test out our loops!
    for:
        multitask: |
            echo
        args: |
            one
            two
            three

retry: 
    command: ls -alh /tmp/bleh
    retry: 3
    exit: 323

config.tester:
    summary: Lets test out the configuration stuff! 
    config: |
        user whoami
    command: echo {{ index .Vars "user" }}